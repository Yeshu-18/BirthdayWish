<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Birthday Surprise</title>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* Reset + layout */
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Dancing Script', cursive;
      background: #000;
      color: white;
      overflow: hidden;
    }
    section {
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      text-align: center;
      position: relative;
    }

    /* Intro overlay */
    #introOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 9999;
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 1;
      transition: opacity 1s ease;
    }
    .overlay-layer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url('final.png');
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
    }
    .overlay-layer.blurred { filter: blur(20px); z-index: 1; background-size: cover; }
    .overlay-layer.sharp { z-index: 2; background-size: contain; }

    /* Landing section */
    #landing { position: relative; width: 100%; overflow: hidden; }
    .background-layer {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      background-image: url('final.png');
      background-size: contain; background-position: center; background-repeat: no-repeat;
    }
    .background-layer.blurred { filter: blur(20px); z-index: 1; background-size: cover; }
    .background-layer.sharp { filter: blur(1px); z-index: 2; background-size: contain; }

    /* Messages */
    .message {
      font-size: clamp(20px, 4vw, 36px);
      font-weight: bold;
      opacity: 0;
      visibility: hidden;
      transition: opacity 1s ease;
      position: absolute;
      z-index: 3;
      padding: 1rem 2rem;
      background: rgba(0,0,0,0.3);
      border-radius: 1rem;
      text-shadow:
        0 0.1em 0.2em rgba(0,0,0,0.7),
        0 0.2em 0.4em rgba(0,0,0,0.6),
        0 0.3em 0.6em rgba(0,0,0,0.5);
    }
    .message.active { opacity: 1; visibility: visible; }

    .scroll-hint {
      position: absolute;
      bottom: 2vh;
      font-size: clamp(14px, 3vw, 22px);
      animation: bounce 1.5s infinite;
      z-index: 3;
    }
    @keyframes bounce { 0%,100%{transform:translateY(0);}50%{transform:translateY(-10px);} }

    /* Cards section */
#cards {
  height: 100vh;
  position: relative;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Background layers for Cards section */
#cards .background-layer {
  position: absolute;
  top: 0; left: 0;
  width: 100%;
  height: 100%;
  background-image: url('card_sec.png'); /* your image */
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
}

#cards .background-layer.blurred {
  filter: blur(20px);
  z-index: 1;
  background-size: cover;
}

#cards .background-layer.sharp {
  filter: blur(1px);
  z-index: 2;
  background-size: contain;
}

/* Make sure cards sit above the backgrounds */
.card-container {
  position: relative;
  z-index: 3;
}


    /* Card container */
    .card-container {
      position: relative;
      width: 80vw;
      max-width: 400px;
      height: 60vh;
      max-height: 600px;
      margin: 0 auto;
    }

    /* Card */
    .card {
      position: absolute;
      width: 100%;
      height: 100%;
      background-image: url('card_sec.png');
      background-size: cover;
      background-position: center;
      color: white;
      border-radius: clamp(10px, 2vw, 30px);
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      font-weight: 700;
      cursor: grab;
      user-select: none;
      padding: clamp(10px, 2%, 30px);
      opacity: 0;
      box-shadow: 0 2vh 4vh rgba(0,0,0,0.2);
      transition: transform 0.3s ease, opacity 0.3s ease, box-shadow 0.3s ease;
      font-size: clamp(25px, 5vw, 40px);
      text-shadow:
        0 0.1em 0.2em rgba(0,0,0,0.7),
        0 0.2em 0.4em rgba(0,0,0,0.6),
        0 0.3em 0.6em rgba(0,0,0,0.5);
    }
    .card.active { opacity: 1; animation: fadeInUp 0.6s ease; }
    @keyframes fadeInUp { from { transform: translateY(3vh); opacity:0; } to { transform: translateY(0); opacity:1; } }
    .card:hover { transform: scale(1.03) translateY(-1vh); box-shadow: 0 4vh 8vh rgba(0,0,0,0.3); }

    /* Emoji */
    .emoji {
      position: fixed;
      top: -50px;
      pointer-events: none;
      animation: fall linear forwards;
      z-index: 9999;
    }
    @keyframes fall { to { transform: translateY(100vh) rotate(360deg); opacity:0; } }

    /* Final message */
    #finalMessage {
      font-size: clamp(25px, 5vw, 40px);
      color: white;
      text-align: center;
      display: none;
      animation: fadeIn 1s forwards;
    }
    @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }

  </style>
</head>
<body>

  <!-- Intro Overlay -->
  <div id="introOverlay">
    <div class="overlay-layer blurred"></div>
    <div class="overlay-layer sharp"></div>
  </div>

  <!-- Landing Section -->
  <section id="landing">
    <div class="background-layer blurred"></div>
    <div class="background-layer sharp"></div>
    <div id="birthdayMsg" class="message">Happy Birthday, My Friend! üéâ</div>
    <div id="apologyMsg" class="message">About Last Time‚Ä¶ üòî I really messed up and I hope you can forgive me ‚ù§Ô∏è</div>
    <div class="scroll-hint">Scroll down ‚¨áÔ∏è</div>
  </section>

  <!-- Cards Section -->
<section id="cards">
  <div class="background-layer blurred"></div>
  <div class="background-layer sharp"></div>

  <div class="card-container">
    <div class="card" data-emojis='["üòî","üò¢","üôè"]'>
      And last ah onnu, nee yarukkagavum bayapudatha...
    </div>
    <div class="card" data-emojis='["ü§ù","üôå","ü´Ç"]'>I'm really sorry d... SORRY üòî</div>
    <div class="card" data-emojis='["üí™","ü¶Å","üõ°Ô∏è"]'>I'll always be there for you ü´µ... And...</div>
    <div class="card" data-emojis='["üòÄ","üòä","‚ù§Ô∏è"]'>I hope, you will have a wonderful day today‚ù§Ô∏è</div>
    <div class="card" data-emojis='["üéÇ","üç∞","üéâ","üéä"]'>Happy Birthday koranguü•≥üéÇ</div>
  </div>
  
  <div id="finalMessage">üéâ Thank you for swiping through! Happy Birthday once again üíñ</div>
</section>


  <!-- Background music -->
  <audio id="bgMusic" src="music.mp3" preload="auto"></audio>

  <script>
    // Emoji Rain
    function startEmojiRain(emojis, duration=4000, count=25){
      for(let i=0;i<count;i++){
        setTimeout(()=>{
          const emoji=document.createElement("div");
          emoji.classList.add("emoji");
          emoji.textContent=emojis[Math.floor(Math.random()*emojis.length)];
          emoji.style.left=Math.random()*100+"vw";
          emoji.style.animationDuration=(Math.random()*2+3)+"s";
          emoji.style.fontSize=(Math.random()*5+20)+"px";
          document.body.appendChild(emoji);
          setTimeout(()=>emoji.remove(), duration);
        }, i*50);
      }
    }

    // Intro overlay handling
    window.addEventListener("load", ()=>{
      setTimeout(()=>{
        const overlay = document.getElementById("introOverlay");
        overlay.style.opacity=0;
        setTimeout(()=>{
          overlay.style.display="none";
          document.getElementById("birthdayMsg").classList.add("active");
          initPageFunctions();
        },1000);
      },3000);
    });

    // Cards logic
    const cards = document.querySelectorAll(".card");
    let current = cards.length-1;
    function showCard(index){
      cards.forEach((card,i)=>{
        card.classList.remove("active");
        card.style.zIndex=i;
        card.style.opacity=i===index?1:0;
        card.style.transform=i===index?"scale(1)":"scale(0.95)";
      });
      const activeCard=cards[index];
      if(activeCard){
        activeCard.classList.add("active");
        const emojis=JSON.parse(activeCard.getAttribute("data-emojis"));
        startEmojiRain(emojis);
      }
    }

    function initPageFunctions(){
      let firstScrollDone=false;
      window.addEventListener("wheel",(e)=>{
        if(firstScrollDone) return;
        e.preventDefault();
        firstScrollDone=true;
        const birthdayMsg=document.getElementById("birthdayMsg");
        const apologyMsg=document.getElementById("apologyMsg");
        const music=document.getElementById("bgMusic");
        music.play().catch(()=>console.log("Autoplay blocked"));

        setTimeout(()=>birthdayMsg.classList.remove("active"), 2000);
        setTimeout(()=>{
          apologyMsg.classList.add("active");
          apologyMsg.addEventListener('transitionend',()=>{
            document.body.style.overflowY="auto";
          }, {once:true});
        },3000);
      }, {passive:false});

      // Card swipe
      cards.forEach(card=>{
        let startX, currentX, isDragging=false;
        function start(posX){startX=posX; isDragging=true; card.style.transition="none";}
        function move(posX){if(!isDragging)return; currentX=posX-startX; card.style.transform=`translateX(${currentX}px) rotate(${currentX/20}deg)`;}
        function end(){
          if(!isDragging)return; isDragging=false; card.style.transition="transform 0.3s ease";
          if(Math.abs(currentX)>100){
            card.style.transform=`translateX(${currentX>0?1000:-1000}px) rotate(${currentX/10}deg)`;
            setTimeout(()=>{
              card.style.display="none";
              current--;
              if(current>=0) showCard(current);
              else{
                document.querySelector(".card-container").style.display="none";
                document.getElementById("finalMessage").style.display="block";
                startEmojiRain(["üéâ","üíñ","‚ú®","ü•≥"],5000,50);
              }
            },300);
          }else{ card.style.transform="translateX(0) rotate(0)"; }
        }
        card.addEventListener("mousedown", e=>start(e.clientX));
        document.addEventListener("mousemove", e=>move(e.clientX));
        document.addEventListener("mouseup", end);
        card.addEventListener("touchstart", e=>start(e.touches[0].clientX));
        card.addEventListener("touchmove", e=>move(e.touches[0].clientX));
        card.addEventListener("touchend", end);
      });

      showCard(current);
    }
  </script>
</body>
</html>
